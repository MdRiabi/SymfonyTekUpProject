{% extends 'base.html.twig' %}

{% block title %}{{ 'team.dashboard'|trans }} - {{ parent() }}{% endblock %}

{% block sidebar %}
{# Overlay qui s'affiche quand la sidebar est ouverte #}
<div id="sidebarOverlay" class="sidebar-overlay"></div>

{# La sidebar elle-même (cachée par défaut sur mobile) #}
<aside id="sidebar" class="sidebar sidebar-hidden sidebar-overlay-mode w-64 bg-white dark:bg-gray-800 h-full shadow-lg transition-colors duration-200">
    <div class="p-6 border-b dark:border-gray-700 flex justify-between items-center">
        <div class="flex items-center">
            <i class="fas fa-user-check text-indigo-600 dark:text-indigo-400 text-2xl"></i>
            <h1 id="logoText" class="ml-3 text-xl font-bold text-gray-800 dark:text-gray-100">Espace Membre</h1>
        </div>
        {# Bouton pour fermer la sidebar (visible sur mobile) #}
        <button id="closeSidebarBtn" class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="Fermer le menu" aria-label="Fermer le menu">
            <i class="fas fa-times text-gray-600 dark:text-gray-300"></i>
        </button>
    </div>

    <div class="flex flex-col h-full">
        {# Profile Section #}
        <div class="p-4 border-b border-gray-200 dark:border-gray-700">
            <div class="flex items-center gap-3">
                <div class="w-12 h-12 rounded-full bg-indigo-600 flex items-center justify-center text-white font-semibold text-lg">
                    {{ app.user.prenom|slice(0, 1) }}{{ app.user.nom|slice(0, 1) }}
                </div>
                <div class="flex-1">
                    <p class="font-semibold text-gray-800 dark:text-white">{{ app.user.prenom }} {{ app.user.nom }}</p>
                    <p class="text-xs text-gray-500 dark:text-gray-400">Membre d'équipe</p>
                </div>
            </div>
        </div>

        {# Navigation #}
        <nav class="flex-1 overflow-y-auto p-4">
            <ul class="space-y-2">
                <li>
                    <a href="{{ path('team_dashboard') }}" class="sidebar-item flex items-center p-3 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-blue-50 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 {{ app.request.get('_route') == 'team_dashboard' ? 'bg-blue-50 dark:bg-gray-700 text-blue-600 dark:text-blue-400' : '' }}">
                        <i class="fas fa-tachometer-alt w-7 h-7 text-xl flex-shrink-0"></i>
                        <span class="ml-3">Mon Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="{{ path('team_tasks') }}" class="sidebar-item flex items-center p-3 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-blue-50 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400 {{ app.request.get('_route') == 'team_tasks' ? 'bg-blue-50 dark:bg-gray-700 text-blue-600 dark:text-blue-400' : '' }}">
                        <i class="fas fa-tasks w-7 h-7 text-xl flex-shrink-0"></i>
                        <span class="ml-3">Mes Tâches</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="sidebar-item flex items-center p-3 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-blue-50 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400">
                        <i class="fas fa-folder-open w-7 h-7 text-xl flex-shrink-0"></i>
                        <span class="ml-3">Mes Projets</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="sidebar-item flex items-center p-3 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-blue-50 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400">
                        <i class="fas fa-clock w-7 h-7 text-xl flex-shrink-0"></i>
                        <span class="ml-3">Feuille de Temps</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="sidebar-item flex items-center p-3 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-blue-50 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400">
                        <i class="fas fa-chart-line w-7 h-7 text-xl flex-shrink-0"></i>
                        <span class="ml-3">Mes Statistiques</span>
                    </a>
                </li>
            </ul>

            {# Divider #}
            <div class="border-t border-gray-200 dark:border-gray-600 my-4"></div>

            <ul class="space-y-2">
                <li>
                    <a href="{{ path('admin_profile') }}" class="sidebar-item flex items-center p-3 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-blue-50 dark:hover:bg-gray-700 hover:text-blue-600 dark:hover:text-blue-400">
                        <i class="fas fa-user-circle w-7 h-7 text-xl flex-shrink-0"></i>
                        <span class="ml-3">Mon Profil</span>
                    </a>
                </li>
                <li>
                    <a href="{{ path('app_logout') }}" class="sidebar-item flex items-center p-3 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-red-50 dark:hover:bg-gray-700 hover:text-red-600 dark:hover:text-red-400">
                        <i class="fas fa-sign-out-alt w-7 h-7 text-xl flex-shrink-0"></i>
                        <span class="ml-3">Déconnexion</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
</aside>
{% endblock %}
